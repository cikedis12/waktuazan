<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>Waktu Azan Shah Alam</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <style type="text/css">
    body {
      margin: 0;
      padding: 0;
      width: 1080px;
      height: 1920px;
      font-family: Arial, Helvetica, sans-serif;
      text-align: center;
      background: url('https://marketplace.canva.com/EAGAoBCHzAg/1/0/900w/canva-blue-white-islamic-elegant-background-instagram-story-RL-SReco5HE.jpg') no-repeat center center fixed;
      background-size: cover;
      color: #ffffff;
      position: relative;
    }
    body:before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 1080px;
      height: 1920px;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 0;
    }
    #container {
      position: relative;
      z-index: 1;
      padding-top: 30px;
    }
    #logo {
      width: 180px;
      animation: pulse 4s infinite;
    }
    h1 {
      font-size: 50px;
      margin: 20px 0;
      text-shadow: 2px 2px #000;
    }
    #clock {
      font-size: 110px;
      margin: 20px 0;
    }
    #nextAzan {
      font-size: 36px;
      margin-bottom: 10px;
    }
    #countdown {
      font-size: 72px;
      font-weight: bold;
      margin: 20px auto;
      background: #ffc107;
      color: #000;
      padding: 20px;
      border-radius: 20px;
      width: 600px;
    }
    #reminder {
      font-size: 28px;
      color: #ffeb3b;
      margin-top: 20px;
      display: none;
    }
    #azanTable {
      width: 90%;
      margin: 30px auto;
      border-collapse: separate;
      border-spacing: 0;
      font-size: 32px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
    }
    #azanTable td {
      padding: 20px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    }
    #azanTable tr:last-child td {
      border-bottom: none;
    }
    #azanTable .highlight {
      background-color: rgba(76, 175, 80, 0.7);
      color: #fff;
      font-weight: bold;
    }
    .azanIcon {
      width: 40px;
      vertical-align: middle;
      margin-right: 10px;
    }
    @keyframes pulse {
      0% { opacity: 1; }
      50% { opacity: 0.7; }
      100% { opacity: 1; }
    }
    #footer {
      margin-top: 60px;
      font-size: 20px;
      color: #ccc;
    }
  </style>

  <script type="text/javascript">
    var azanTimes = [
      { name: 'Subuh', time: '05:53', icon: 'icons/subuh.png' },
      { name: 'Zohor', time: '13:12', icon: 'icons/zohor.png' },
      { name: 'Asar',  time: '16:58', icon: 'icons/asar.png' },
      { name: 'Maghrib', time: '19:20', icon: 'icons/maghrib.png' },
      { name: 'Isyak', time: '20:32', icon: 'icons/isyak.png' }
    ];

    var beepPlayed = false;
    var azanPlayed = false;

    function parseTime(hhmm) {
      var now = new Date();
      var parts = hhmm.split(':');
      return new Date(now.getFullYear(), now.getMonth(), now.getDate(), parseInt(parts[0], 10), parseInt(parts[1], 10), 0);
    }

    function getNextAzan() {
      var now = new Date();
      for (var i = 0; i < azanTimes.length; i++) {
        var azan = parseTime(azanTimes[i].time);
        if (azan > now) {
          return { index: i, ...azanTimes[i], date: azan };
        }
      }
      var tomorrow = parseTime(azanTimes[0].time);
      tomorrow.setDate(tomorrow.getDate() + 1);
      return { index: 0, ...azanTimes[0], date: tomorrow };
    }

    function pad(n) {
      return (n < 10 ? '0' : '') + n;
    }

    function formatTime(sec) {
      var h = Math.floor(sec / 3600);
      var m = Math.floor((sec % 3600) / 60);
      var s = sec % 60;
      return pad(h) + ':' + pad(m) + ':' + pad(s);
    }

    function updateDisplay() {
      var now = new Date();
      document.getElementById("clock").innerHTML = pad(now.getHours()) + ":" + pad(now.getMinutes()) + ":" + pad(now.getSeconds());

      var nextAzan = getNextAzan();
      var diff = Math.floor((nextAzan.date - now) / 1000);
      if (diff < 0) diff = 0;

      document.getElementById("nextAzan").innerHTML = "Next Azan: " + nextAzan.name + " (" + nextAzan.time + ")";
      document.getElementById("countdown").innerHTML = formatTime(diff);

      var reminder = document.getElementById("reminder");
      if (diff <= 300 && diff > 0) {
        reminder.style.display = "block";
        if (!beepPlayed) {
          document.getElementById("beepSound").src = "beep.wav";
          beepPlayed = true;
        }
      } else {
        reminder.style.display = "none";
      }

      if (diff <= 0 && !azanPlayed) {
        document.getElementById("azanSound").src = "azan.wav";
        azanPlayed = true;
      }

      if (diff < -5) {
        beepPlayed = false;
        azanPlayed = false;
      }

      renderAzanList(nextAzan.index);

      setTimeout(updateDisplay, 1000);
    }

    function renderAzanList(highlightIndex) {
      var html = '';
      for (var i = 0; i < azanTimes.length; i++) {
        html += '<tr' + (i === highlightIndex ? ' class="highlight"' : '') + '>';
        html += '<td><img class="azanIcon" src="' + azanTimes[i].icon + '" alt="' + azanTimes[i].name + ' Icon" /></td>';
        html += '<td>' + azanTimes[i].name + '</td>';
        html += '<td>' + azanTimes[i].time + '</td>';
        html += '</tr>';
      }
      document.getElementById("azanTableBody").innerHTML = html;
    }
  </script>
</head>

<body onload="updateDisplay()">
  <div id="container">
    <img id="logo" src="https://static.vecteezy.com/system/resources/previews/045/705/064/non_2x/islamic-mosque-design-illustration-masjid-black-color-icon-vector.jpg" alt="Masjid Icon">
    <h1>Waktu Azan Shah Alam</h1>
    <div id="clock">--:--:--</div>
    <div id="nextAzan">Next Azan: -- (--:--)</div>
    <div id="countdown">--:--:--</div>
    <div id="reminder">5 min before Azan - Sila bersedia untuk solat.</div>

    <table id="azanTable">
      <tbody id="azanTableBody"></tbody>
    </table>

    <embed id="beepSound" src="" hidden="true" autostart="false" loop="false" />
    <embed id="azanSound" src="" hidden="true" autostart="false" loop="false" />

    <div id="footer">
      ❤️ Sumbangan amat dialu-alukan | Tabung Dana Surau SIRIM
    </div>
  </div>
</body>
</html>
